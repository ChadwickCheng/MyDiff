## diff发生在虚拟dom上

## 真实dom->虚拟dom 不研究

## 大纲
1. h函数实现生成虚拟dom节点
2. diff
3. 虚拟dom->真实dom

虚拟dom节点包括的属性：
1. children：子元素
2. data：属性和样式
3. elm：对应的真正dom节点
4. key：唯一标识
5. sel：标签名
6. text：标签体文字
  
## diff
1. key：告诉算法更改前后这是相同的节点。
2. 同一个虚拟节点会精细比较。非同一节点暴力删除旧。选择器和key都相同才是同一虚拟节点。3
3. 只进行同层比较，跨层直接删。

## 最复杂情况
1. 新前 旧前
2. 新后 旧后
3. 新后 旧前 移动节点，新前节点放在旧后之后
4. 新前 旧后 移动节点，新前节点放在旧前之前
5. 都没命中对旧循环找到与新前匹配的节点，移动到旧前之前。找不到与新前匹配的节点则将新前转为真实dom插入到旧前之前。之后新前指针后移。

旧节点先循环完，新节点有需要插入的节点，加入到旧前之前
新节点先循环完，老节点有剩余节点(旧前旧后中)，全部删除